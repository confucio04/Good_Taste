
<div id="cartProductContainer" class="products-container">
    <!-- Contenido del producto se insertará mediante JavaScript -->
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var addedProduct = localStorage.getItem("addedProduct");

        if (addedProduct) {
            addedProduct = JSON.parse(addedProduct);

            var cartProductContainer = document.getElementById("cartProductContainer");

            if (cartProductContainer) {
                cartProductContainer.innerHTML = `
                    <div class="products">
                        <div class="product-img">
                            <img src="${addedProduct.image}" alt="${addedProduct.title}" />
                        </div>
                    </div>
                    <div class="products">
                        <div class="product-content">
                            <h2 class="text-align">${addedProduct.title}</h2>
                            <p class="text-align">${addedProduct.description}</p>
                            <p class="text-align">$${addedProduct.price}</p>
                            <form action="/cart/update" method="post">
                                <input type="hidden" name="id" value="${addedProduct.id}">
                                <label for="quantity" class="align">Quantity</label>
                                <div class="price">  
                                    <input type="number" class="border" name="quantity" id="quantity" value="${addedProduct.quantity}" min="1">
                                    <button type="submit">Update</button>
                                </div>
                            </form>
                            <a href="/checkout" id="goToCheckout" class="checkout-btn">Checkout</a>
                        </div>
                    </div>
                `;
            }

            localStorage.removeItem("addedProduct");

            // Verificar si el carrito está vacío antes de redirigir al checkout
            var goToCheckoutLink = document.getElementById("goToCheckout");
            if (goToCheckoutLink) {
                goToCheckoutLink.addEventListener("click", function (event) {
                    // Ejemplo de lógica para verificar si el carrito está vacío
                    var cartIsEmpty = addedProduct.quantity === 0; // Puedes ajustar esta lógica según tus necesidades
                    
                    if (cartIsEmpty) {
                        // El carrito está vacío, puedes mostrar un mensaje al usuario o tomar la acción apropiada
                        alert("El carrito está vacío. Agrega productos antes de proceder al checkout.");
                        event.preventDefault(); // Evita que se realice la redirección
                    }
                });
            }
        }
    });
</script>





{% schema %}
{
    "name": "Template Cart",
    "blocks": [
        {
            "type": "subtotal",
            "name": "Subtotal",
            "limit": 1
        },
        {
            "type": "update_button",
            "name": "Update Button",
            "limit": 1
        },
        {
            "type": "checkout_button",
            "name": "Checkout Button",
            "limit": 1
        }
    ]
}
{% endschema %}