<!-- sections/template-cart.liquid -->

<div id="cartProductContainer">
    <!-- Contenido del producto se insertará mediante JavaScript -->
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var selectedProduct = localStorage.getItem("selectedProduct");

        if (selectedProduct) {
            selectedProduct = JSON.parse(selectedProduct);

            var cartProductContainer = document.getElementById("cartProductContainer");

            if (cartProductContainer) {
                cartProductContainer.innerHTML = `
                    <div class="cart-product">
                        <div class="cart-product-img">
                            <img src="${selectedProduct.image}" alt="${selectedProduct.title}" />
                        </div>
                    </div>
                    <div class="cart-product">
                        <div class="cart-product-content">
                            <span class="text-xs align text-gray-500">${selectedProduct.vendor}</span>
                            <h2 class="text-align">${selectedProduct.title}</h2>
                            <p class="text-align size">${selectedProduct.price | money}</p>
                            <p class="text-align text-space">${selectedProduct.description}</p>

                            ${selectedProduct.available
                                ? `<form action="/cart/update" method="post" id="updateForm">
                                    <input type="hidden" name="id" value="${selectedProduct.id}">
                                    <label for="quantity" class="align">Quantity</label>
                                    <div class="price">
                                        <input type="number" class="border" name="quantity" id="quantity" value="${selectedProduct.quantity}" min="1">
                                        <button type="submit" class="cart-btn">Update</button>
                                    </div>
                                </form>`
                                : `<p>Out of Stock</p>`}
                        </div>
                    </div>
                `;

                // Manejo de eventos del formulario
                var updateForm = document.getElementById("updateForm");
                updateForm.addEventListener("submit", function (event) {
                    // Lógica para manejar la actualización del carrito
                    event.preventDefault();
                    // Puedes agregar lógica adicional aquí, como enviar la actualización mediante AJAX.
                });
            }

            // Limpia la información del producto almacenada en localStorage después de mostrarla
            localStorage.removeItem("selectedProduct");
        }
    });
</script>




{% schema %}
{
    "name": "Template Cart",
    "blocks": [
        {
            "type": "subtotal",
            "name": "Subtotal",
            "limit": 1
        },
        {
            "type": "update_button",
            "name": "Update Button",
            "limit": 1
        },
        {
            "type": "checkout_button",
            "name": "Checkout Button",
            "limit": 1
        }
    ]
}
{% endschema %}