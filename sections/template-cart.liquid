
<!-- sections/template-cart.liquid -->

{% if request.params.id %}
    <div class="cart-product">
        <img src="{{ request.params.image | image_url: width: 280, scale: 2 }}"
            alt="{{ request.params.title }}" 
            loading="eager"
            width="100" 
            height="auto"
        >
        <h2>{{ request.params.title }}</h2>
        <p>{{ request.params.description }}</p>
        <p>Price: ${{ request.params.price | money }}</p>
        <form action="/cart/update" method="post">
            <input type="hidden" name="id" value="{{ request.params.id }}">
            <label for="quantity">Quantity:</label>
            <input type="number" name="quantity" id="quantity" value="1" min="1">
            <button type="submit">Update</button>
        </form>
        <a href="/cart/clear">Clear Cart</a>
    </div>
{% else %}
    <p>No products in the cart.</p>
{% endif %}

  <!-- En tu plantilla de carrito -->
<div class="cart-product" id="cartProductContainer">
    <!-- Contenido del producto se insertará mediante JavaScript -->
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Recupera la información del producto almacenada en localStorage
        var addedProduct = localStorage.getItem("addedProduct");

        if (addedProduct) {
            // Convierte la cadena JSON almacenada en un objeto JavaScript
            addedProduct = JSON.parse(addedProduct);

            // Muestra la información del producto en algún lugar de tu página del carrito
            var cartProductContainer = document.getElementById("cartProductContainer");

            if (cartProductContainer) {
                cartProductContainer.innerHTML = `
                    <img src="${addedProduct.image}" alt="${addedProduct.title}" />
                    <h2>${addedProduct.title}</h2>
                    <p>${addedProduct.description}</p>
                    <p>Price: $${addedProduct.price}</p>
                    <form action="/cart/update" method="post">
                        <input type="hidden" name="id" value="${addedProduct.id}">
                        <label for="quantity">Quantity:</label>
                        <input type="number" name="quantity" id="quantity" value="${addedProduct.quantity}" min="1">
                        <button type="submit">Update</button>
                    </form>
                    <a href="/cart/clear">Clear Cart</a>
                `;
            }

            // Limpia la información del producto almacenada en localStorage después de mostrarla
            localStorage.removeItem("addedProduct");
        }
    });
</script>


{% schema %}
{
    "name": "Template Cart",
    "blocks": [
        {
            "type": "subtotal",
            "name": "Subtotal",
            "limit": 1
        },
        {
            "type": "update_button",
            "name": "Update Button",
            "limit": 1
        },
        {
            "type": "checkout_button",
            "name": "Checkout Button",
            "limit": 1
        }
    ]
}
{% endschema %}